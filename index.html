<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Universal AI Chat</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        gemini: {
                            50: '#f0f4f9',
                            100: '#e1e7ee',
                            800: '#1e293b',
                            900: '#0f172a',
                        }
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        .dark ::-webkit-scrollbar-thumb { background: #475569; }
        
        /* Markdown Styles */
        .prose pre { background-color: #1e1e1e !important; border-radius: 0.5rem; margin-top: 0.5rem; margin-bottom: 0.5rem; }
        .prose code { color: #eb5757; background: rgba(0,0,0,0.05); padding: 2px 4px; border-radius: 4px; font-size: 0.9em; }
        .dark .prose code { color: #f87171; background: rgba(255,255,255,0.1); }
        .prose pre code { color: inherit; background: transparent; padding: 0; }
        .prose p { margin-bottom: 0.75rem; line-height: 1.6; }
        .prose ul { list-style-type: disc; padding-left: 1.5rem; margin-bottom: 0.75rem; }
        .prose ol { list-style-type: decimal; padding-left: 1.5rem; margin-bottom: 0.75rem; }
        
        /* Loader */
        #loading { position: fixed; inset: 0; background: #fff; z-index: 9999; display: flex; justify-content: center; align-items: center; font-family: sans-serif; font-weight: 500; }
        .dark #loading { background: #0f172a; color: white; }
        
        /* Mobile safe area */
        body { height: 100dvh; overflow: hidden; }
    </style>
</head>
<body class="bg-gemini-50 text-slate-800 dark:bg-gemini-900 dark:text-slate-100 transition-colors duration-200">

    <div id="loading">
        <div class="flex flex-col items-center gap-4">
            <div class="w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
            <p>Initializing Interface...</p>
        </div>
    </div>

    <div id="app" class="hidden flex h-full w-full relative">
        
        <div id="sidebar-overlay" class="fixed inset-0 bg-black/50 z-30 hidden lg:hidden glass backdrop-blur-sm" onclick="toggleSidebar()"></div>

        <aside id="sidebar" class="fixed inset-y-0 left-0 z-40 w-[280px] bg-gemini-100 dark:bg-slate-900 transform -translate-x-full lg:translate-x-0 lg:static transition-transform duration-300 flex flex-col border-r border-slate-200 dark:border-slate-800">
            <div class="p-4">
                <button onclick="createNewChat()" class="w-full flex items-center gap-3 bg-slate-200 dark:bg-slate-800 hover:bg-slate-300 dark:hover:bg-slate-700 px-4 py-3 rounded-full transition-colors font-medium text-sm">
                    <i class="fa-solid fa-plus text-blue-500"></i>
                    <span>New Chat</span>
                </button>
            </div>

            <div class="flex-1 overflow-y-auto px-2 space-y-1" id="chat-list">
                </div>

            <div class="p-4 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between">
                <button onclick="toggleSettings()" class="flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400 hover:text-blue-500 transition-colors">
                    <i class="fa-solid fa-gear"></i> Settings
                </button>
                <button onclick="toggleTheme()" class="w-8 h-8 flex items-center justify-center rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors">
                    <i id="theme-icon" class="fa-solid fa-moon"></i>
                </button>
            </div>
        </aside>

        <main class="flex-1 flex flex-col h-full relative w-full bg-white dark:bg-gemini-900">
            
            <header class="h-14 flex items-center justify-between px-4 border-b border-slate-100 dark:border-slate-800 shrink-0">
                <div class="flex items-center gap-3">
                    <button onclick="toggleSidebar()" class="lg:hidden p-2 text-slate-500 hover:text-slate-800 dark:hover:text-white">
                        <i class="fa-solid fa-bars text-xl"></i>
                    </button>
                    <span id="current-model-display" class="text-xs font-mono bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 px-2 py-1 rounded">Model</span>
                </div>
                <div class="flex gap-2">
                    <button id="chat-options-btn" onclick="toggleChatOptions()" class="hidden p-2 text-slate-400 hover:text-red-500">
                        <i class="fa-solid fa-ellipsis-vertical"></i>
                    </button>
                </div>
            </header>

            <div id="chat-options-menu" class="hidden absolute top-12 right-4 bg-white dark:bg-slate-800 shadow-xl rounded-lg border border-slate-200 dark:border-slate-700 z-20 w-40 overflow-hidden">
                <button onclick="startRenameChat()" class="w-full text-left px-4 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2">
                    <i class="fa-solid fa-pen"></i> Rename
                </button>
                <button onclick="deleteCurrentChat()" class="w-full text-left px-4 py-2 text-sm text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 flex items-center gap-2">
                    <i class="fa-solid fa-trash"></i> Delete
                </button>
            </div>

            <div id="chat-container" class="flex-1 overflow-y-auto p-4 md:p-8 space-y-6 scroll-smooth">
                <div id="welcome-screen" class="h-full flex flex-col items-center justify-center text-center opacity-50">
                    <i class="fa-solid fa-sparkles text-4xl mb-4 text-blue-500"></i>
                    <h2 class="text-2xl font-semibold mb-2">How can I help you today?</h2>
                    <p class="text-sm max-w-md">Ensure your OpenRouter API key is set in settings.</p>
                </div>
                </div>

            <div class="shrink-0 p-4 bg-white dark:bg-gemini-900 w-full max-w-4xl mx-auto">
                <div class="relative flex items-end gap-2 bg-gemini-50 dark:bg-slate-800 rounded-3xl p-2 border border-transparent focus-within:border-blue-300 dark:focus-within:border-blue-700 transition-all shadow-sm">
                    <textarea 
                        id="user-input" 
                        rows="1" 
                        placeholder="Message..." 
                        class="w-full bg-transparent border-0 focus:ring-0 resize-none max-h-32 py-3 px-4 text-slate-800 dark:text-slate-100 placeholder-slate-400"
                        oninput="autoResize(this)"
                        onkeydown="handleEnter(event)"
                    ></textarea>
                    <button id="send-btn" onclick="sendMessage()" class="p-3 bg-blue-600 hover:bg-blue-700 text-white rounded-full flex-shrink-0 transition-transform active:scale-95 mb-1 mr-1 disabled:opacity-50 disabled:cursor-not-allowed">
                        <i class="fa-solid fa-paper-plane"></i>
                    </button>
                </div>
                <div class="text-center mt-2">
                    <p class="text-[10px] text-slate-400">AI can make mistakes. Check important info.</p>
                </div>
            </div>
        </main>
    </div>

    <div id="settings-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="toggleSettings()"></div>
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[90%] max-w-md bg-white dark:bg-slate-900 rounded-2xl shadow-2xl p-6 border border-slate-200 dark:border-slate-800">
            <h3 class="text-xl font-bold mb-4">Settings</h3>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-xs font-semibold uppercase text-slate-500 mb-1">OpenRouter API Key</label>
                    <input type="password" id="api-key-input" placeholder="sk-or-..." class="w-full bg-slate-100 dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-blue-500">
                </div>

                <div>
                    <label class="block text-xs font-semibold uppercase text-slate-500 mb-1">Model ID</label>
                    <input type="text" id="model-input" value="deepseek/deepseek-r1:free" class="w-full bg-slate-100 dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-blue-500">
                    <p class="text-[10px] text-slate-400 mt-1">Default: deepseek/deepseek-r1:free</p>
                </div>

                <div>
                    <label class="block text-xs font-semibold uppercase text-slate-500 mb-1">System Prompt</label>
                    <textarea id="system-prompt-input" rows="3" placeholder="You are a helpful assistant..." class="w-full bg-slate-100 dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-blue-500"></textarea>
                </div>
            </div>

            <div class="mt-6 flex justify-end">
                <button onclick="saveSettings()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium">Save & Close</button>
            </div>
        </div>
    </div>

    <div id="rename-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="closeRenameModal()"></div>
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[90%] max-w-sm bg-white dark:bg-slate-900 rounded-2xl shadow-2xl p-6">
            <h3 class="text-lg font-bold mb-4">Rename Chat</h3>
            <input type="text" id="rename-input" class="w-full bg-slate-100 dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-2 text-sm mb-4">
            <div class="flex justify-end gap-2">
                <button onclick="closeRenameModal()" class="px-4 py-2 text-sm text-slate-500 hover:text-slate-700">Cancel</button>
                <button onclick="confirmRename()" class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm">Save</button>
            </div>
        </div>
    </div>

    <script>
        // --- State Management ---
        const STATE = {
            chats: [],
            currentChatId: null,
            settings: {
                apiKey: '',
                model: 'deepseek/deepseek-r1:free',
                systemPrompt: 'You are a helpful AI assistant.',
                theme: 'light'
            },
            isGenerating: false
        };

        // --- DOM Elements ---
        const els = {
            app: document.getElementById('app'),
            loading: document.getElementById('loading'),
            sidebar: document.getElementById('sidebar'),
            sidebarOverlay: document.getElementById('sidebar-overlay'),
            chatContainer: document.getElementById('chat-container'),
            chatList: document.getElementById('chat-list'),
            userInput: document.getElementById('user-input'),
            welcomeScreen: document.getElementById('welcome-screen'),
            settingsModal: document.getElementById('settings-modal'),
            renameModal: document.getElementById('rename-modal'),
            chatOptionsMenu: document.getElementById('chat-options-menu'),
            chatOptionsBtn: document.getElementById('chat-options-btn'),
            apiKeyInput: document.getElementById('api-key-input'),
            modelInput: document.getElementById('model-input'),
            systemPromptInput: document.getElementById('system-prompt-input'),
            renameInput: document.getElementById('rename-input'),
            currentModelDisplay: document.getElementById('current-model-display'),
            sendBtn: document.getElementById('send-btn')
        };

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            loadState();
            applyTheme();
            renderSidebar();
            
            // If no chats, create one
            if (STATE.chats.length === 0) {
                createNewChat(false);
            } else {
                // Select most recent or first
                if (!STATE.currentChatId) STATE.currentChatId = STATE.chats[0].id;
                renderChat();
            }

            // Hide loader
            setTimeout(() => {
                els.loading.classList.add('hidden');
                els.app.classList.remove('hidden');
            }, 500);

            // Marked config
            marked.setOptions({
                highlight: function(code, lang) {
                    const language = highlight.getLanguage(lang) ? lang : 'plaintext';
                    return highlight.highlight(code, { language }).value;
                },
                breaks: true
            });
        });

        // --- Persistence ---
        function saveState() {
            localStorage.setItem('gemini_clone_state', JSON.stringify(STATE));
        }

        function loadState() {
            const saved = localStorage.getItem('gemini_clone_state');
            if (saved) {
                const parsed = JSON.parse(saved);
                STATE.chats = parsed.chats || [];
                STATE.currentChatId = parsed.currentChatId;
                STATE.settings = { ...STATE.settings, ...parsed.settings };
            }
            // Populate settings inputs
            els.apiKeyInput.value = STATE.settings.apiKey || '';
            els.modelInput.value = STATE.settings.model;
            els.systemPromptInput.value = STATE.settings.systemPrompt;
            els.currentModelDisplay.innerText = STATE.settings.model.split('/')[1] || STATE.settings.model;
        }

        // --- Theme ---
        function toggleTheme() {
            STATE.settings.theme = STATE.settings.theme === 'light' ? 'dark' : 'light';
            applyTheme();
            saveState();
        }

        function applyTheme() {
            const html = document.documentElement;
            const icon = document.getElementById('theme-icon');
            if (STATE.settings.theme === 'dark') {
                html.classList.add('dark');
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
            } else {
                html.classList.remove('dark');
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
            }
        }

        // --- Sidebar & Layout ---
        function toggleSidebar() {
            const isClosed = els.sidebar.classList.contains('-translate-x-full');
            if (isClosed) {
                els.sidebar.classList.remove('-translate-x-full');
                els.sidebarOverlay.classList.remove('hidden');
            } else {
                els.sidebar.classList.add('-translate-x-full');
                els.sidebarOverlay.classList.add('hidden');
            }
        }

        function renderSidebar() {
            els.chatList.innerHTML = '';
            STATE.chats.forEach(chat => {
                const isActive = chat.id === STATE.currentChatId;
                const div = document.createElement('div');
                div.className = `group flex items-center gap-3 p-3 rounded-full cursor-pointer transition-colors text-sm ${isActive ? 'bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-200 font-semibold' : 'hover:bg-slate-200 dark:hover:bg-slate-800'}`;
                div.onclick = () => switchChat(chat.id);
                div.innerHTML = `
                    <i class="fa-regular fa-message ${isActive ? 'text-blue-500' : 'text-slate-400'}"></i>
                    <span class="truncate flex-1">${chat.title}</span>
                `;
                els.chatList.appendChild(div);
            });
        }

        // --- Chat Logic ---
        function createNewChat(shouldRender = true) {
            const newChat = {
                id: Date.now().toString(),
                title: 'New Chat',
                messages: [],
                model: STATE.settings.model,
                createdAt: Date.now()
            };
            STATE.chats.unshift(newChat);
            STATE.currentChatId = newChat.id;
            saveState();
            if (shouldRender) {
                renderSidebar();
                renderChat();
                if(window.innerWidth < 1024) toggleSidebar(); // close sidebar on mobile
            }
        }

        function switchChat(id) {
            STATE.currentChatId = id;
            saveState();
            renderSidebar();
            renderChat();
            if(window.innerWidth < 1024) toggleSidebar();
        }

        function renderChat() {
            const chat = STATE.chats.find(c => c.id === STATE.currentChatId);
            els.chatContainer.innerHTML = '';
            
            if (!chat || chat.messages.length === 0) {
                els.welcomeScreen.classList.remove('hidden');
                els.chatOptionsBtn.classList.add('hidden');
                return;
            }

            els.welcomeScreen.classList.add('hidden');
            els.chatOptionsBtn.classList.remove('hidden');

            chat.messages.forEach(msg => {
                appendMessageToDOM(msg.role, msg.content);
            });
            scrollToBottom();
        }

        function appendMessageToDOM(role, content) {
            const div = document.createElement('div');
            const isUser = role === 'user';
            
            div.className = `w-full flex ${isUser ? 'justify-end' : 'justify-start'}`;
            
            const bubble = document.createElement('div');
            bubble.className = `max-w-[85%] md:max-w-[75%] rounded-2xl px-5 py-3 shadow-sm text-sm md:text-base leading-relaxed overflow-hidden ${
                isUser 
                ? 'bg-blue-600 text-white rounded-tr-sm' 
                : 'bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-tl-sm text-slate-800 dark:text-slate-100 prose dark:prose-invert max-w-none'
            }`;

            if (isUser) {
                bubble.innerText = content;
            } else {
                bubble.innerHTML = marked.parse(content);
            }

            div.appendChild(bubble);
            els.chatContainer.appendChild(div);
        }

        function scrollToBottom() {
            els.chatContainer.scrollTop = els.chatContainer.scrollHeight;
        }

        // --- Input Handling ---
        function autoResize(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = textarea.scrollHeight + 'px';
        }

        function handleEnter(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        }

        // --- API & Streaming Logic ---
        async function sendMessage() {
            if (STATE.isGenerating) return;
            
            const text = els.userInput.value.trim();
            if (!text) return;

            if (!STATE.settings.apiKey) {
                alert('Please enter your OpenRouter API Key in Settings.');
                toggleSettings();
                return;
            }

            // UI Updates
            els.userInput.value = '';
            els.userInput.style.height = 'auto';
            STATE.isGenerating = true;
            els.sendBtn.disabled = true;
            els.welcomeScreen.classList.add('hidden');

            // Find current chat
            const chatIndex = STATE.chats.findIndex(c => c.id === STATE.currentChatId);
            if (chatIndex === -1) return;

            // Add User Message
            const userMsg = { role: 'user', content: text };
            STATE.chats[chatIndex].messages.push(userMsg);
            appendMessageToDOM('user', text);
            scrollToBottom();

            // Rename chat if it's the first message
            if (STATE.chats[chatIndex].messages.length === 1) {
                STATE.chats[chatIndex].title = text.slice(0, 30) + (text.length > 30 ? '...' : '');
                renderSidebar();
            }

            // Prepare AI Placeholder
            const aiMsg = { role: 'assistant', content: '' };
            STATE.chats[chatIndex].messages.push(aiMsg);
            
            // Create AI Message DOM Element manually to enable streaming updates
            const wrapperDiv = document.createElement('div');
            wrapperDiv.className = 'w-full flex justify-start';
            const bubbleDiv = document.createElement('div');
            bubbleDiv.className = 'max-w-[85%] md:max-w-[75%] rounded-2xl px-5 py-3 shadow-sm text-sm md:text-base leading-relaxed bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-tl-sm text-slate-800 dark:text-slate-100 prose dark:prose-invert';
            bubbleDiv.innerHTML = '<span class="animate-pulse">‚óè</span>'; // Loading indicator
            wrapperDiv.appendChild(bubbleDiv);
            els.chatContainer.appendChild(wrapperDiv);
            scrollToBottom();

            // Prepare Messages Payload
            const messagesPayload = [
                { role: 'system', content: STATE.settings.systemPrompt },
                ...STATE.chats[chatIndex].messages.slice(0, -1) // Exclude empty AI placeholder
            ];

            try {
                const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
                    method: "POST",
                    headers: {
                        "Authorization": `Bearer ${STATE.settings.apiKey}`,
                        "Content-Type": "application/json",
                        "HTTP-Referer": window.location.href, 
                        "X-Title": "Universal AI Chat"
                    },
                    body: JSON.stringify({
                        model: STATE.settings.model,
                        messages: messagesPayload,
                        stream: true
                    })
                });

                if (!response.ok) throw new Error(`API Error: ${response.status}`);

                const reader = response.body.getReader();
                const decoder = new TextDecoder("utf-8");
                let fullContent = "";

                while (true) {
                    const { done, value } = await reader.read();
                    if (done) break;
                    
                    const chunk = decoder.decode(value, { stream: true });
                    const lines = chunk.split('\n');
                    
                    for (const line of lines) {
                        if (line.startsWith('data: ')) {
                            const dataStr = line.replace('data: ', '').trim();
                            if (dataStr === '[DONE]') break;
                            try {
                                const data = JSON.parse(dataStr);
                                const token = data.choices[0]?.delta?.content || "";
                                if (token) {
                                    fullContent += token;
                                    // Update UI real-time
                                    bubbleDiv.innerHTML = marked.parse(fullContent);
                                    // Auto scroll only if near bottom
                                    scrollToBottom(); 
                                }
                            } catch (e) { console.error('Parse error', e); }
                        }
                    }
                }

                // Finalize State
                STATE.chats[chatIndex].messages[STATE.chats[chatIndex].messages.length - 1].content = fullContent;
                saveState();

                // Apply Syntax Highlighting to new content
                document.querySelectorAll('pre code').forEach((block) => {
                    highlight.highlightElement(block);
                });

            } catch (error) {
                bubbleDiv.innerHTML = `<span class="text-red-500">Error: ${error.message}</span>`;
                STATE.chats[chatIndex].messages.pop(); // Remove failed message
            } finally {
                STATE.isGenerating = false;
                els.sendBtn.disabled = false;
                els.userInput.focus();
            }
        }

        // --- Settings & Modal Logic ---
        function toggleSettings() {
            els.settingsModal.classList.toggle('hidden');
        }

        function saveSettings() {
            STATE.settings.apiKey = els.apiKeyInput.value.trim();
            STATE.settings.model = els.modelInput.value.trim() || 'deepseek/deepseek-r1:free';
            STATE.settings.systemPrompt = els.systemPromptInput.value.trim();
            
            els.currentModelDisplay.innerText = STATE.settings.model.split('/')[1] || STATE.settings.model;
            
            saveState();
            toggleSettings();
        }

        // --- Chat Options (Delete/Rename) ---
        function toggleChatOptions() {
            els.chatOptionsMenu.classList.toggle('hidden');
        }

        function deleteCurrentChat() {
            if (confirm('Are you sure you want to delete this chat?')) {
                STATE.chats = STATE.chats.filter(c => c.id !== STATE.currentChatId);
                
                if (STATE.chats.length === 0) {
                    STATE.currentChatId = null;
                    createNewChat(false); // Create empty but don't render yet
                } else {
                    STATE.currentChatId = STATE.chats[0].id;
                }
                
                saveState();
                renderSidebar();
                renderChat();
                toggleChatOptions();
            }
        }

        function startRenameChat() {
            const chat = STATE.chats.find(c => c.id === STATE.currentChatId);
            if(chat) {
                els.renameInput.value = chat.title;
                els.renameModal.classList.remove('hidden');
                toggleChatOptions();
            }
        }

        function closeRenameModal() {
            els.renameModal.classList.add('hidden');
        }

        function confirmRename() {
            const newTitle = els.renameInput.value.trim();
            if (newTitle) {
                const chat = STATE.chats.find(c => c.id === STATE.currentChatId);
                if (chat) {
                    chat.title = newTitle;
                    saveState();
                    renderSidebar();
                }
            }
            closeRenameModal();
        }

        // Close dropdowns when clicking outside
        document.addEventListener('click', (e) => {
            if (!els.chatOptionsBtn.contains(e.target) && !els.chatOptionsMenu.contains(e.target)) {
                els.chatOptionsMenu.classList.add('hidden');
            }
        });
    </script>
</body>
</html>
